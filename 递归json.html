<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
	</body>
	<script>
		var ojson = [
			{
				allchild:[
					{
						allchild:[
							
						],
						id:'1'
					}
				],
				id:'1'
			},
			{
				allchild:[
					{
						allchild:[
							
						],
						id:'1'
					}
				],
				id:'1'
			},
			{
				allchild:[
					
				],
				id:'1'
			}
		];
		//方法2
		var jsonFn = function(arr){
			arr.map(item=>{
				var data = {};
				for(let key in item){
					if(key=='allchild'){
						item.children=item[key]
						if(item.allchild&&item.allchild.length){
							jsonFn(item.allchild)
						}
						delete item[key]
					}
					if(key!=='children'){
						data[key]=item[key]
						delete item[key]
					}
				}
				item.data=data;
			})
		};
		jsonFn(ojson)
		console.log(ojson)
	</script>
</html>
